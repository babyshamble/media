if("undefined"==typeof YX)var YX={};YX.Data=function(){function k(){return(new Date).getMilliseconds()*Math.ceil(100*Math.random())*Math.ceil(10*Math.random())}if("undefinded"==typeof jQuery)throw"YMAPI depended on jquery!";var a=this;this.errorMsg="";this.ajaxTimers=[];this.ajaxTimeout=1E4;this.config=new YX.Data.Config(this);this.util=new YX.Data.Util(this);this.cache=new YX.Data.Cache(this);this.config.Init();if(!this.config.lid&&!this.config.tid)throw this.errorMsg="Initialize data failed,No LID or TID!",this.errorMsg;if(this.config.lid&&!/^\d{1,}$/.test(this.config.lid+""))throw this.errorMsg="Initialize Data Failed,No LID!",this.errorMsg;if(this.config.tid&&!/^\d{1,}$/.test(this.config.tid+""))throw this.errorMsg="Initialize Data Failed\u00a3\u00acNo TID!",this.errorMsg;this.RD=function(b,d,c,e){if(e&&a.cache.Get(e))c(a.cache.Get(e),"");else if("function"!=typeof c&&(c=function(){}),d||(d={}),!b)a.errorMsg="The url is invalid!",c(null,a.errorMsg);else if(!a.ajaxTimers[e])return a.ajaxTimers[e]=setTimeout(function(){clearTimeout(a.ajaxTimers[e]);a.ajaxTimers[e]=0;a.errorMsg="Error,The request is timeout!";c(null,a.errorMsg)},a.ajaxTimeout),$.ajax({async:!0,url:b,type:"GET",dataType:"jsonp",jsonp:"yxjn",data:d,timeout:a.ajaxTimeout,cKey:e,success:function(b){a.ajaxTimers[e]&&(clearTimeout(a.ajaxTimers[e]),a.ajaxTimers[e]=0,b?(a.cache.Set(e,b),c(b,"")):(a.errorMsg="Data load failed!",c(null,a.errorMsg)))}}),!0};this.SortNews=function(b,d){var c=d?d:a.config.sortRouter,e=Math.ceil(100*(new Date).getMilliseconds()*Math.random()*17/Math.ceil(10*Math.random()+1));a.RD(a.config.sortUrl+c,{tid:a.config.tid,lid:a.config.lid},b,"sortnews_"+a.config.lid+"_"+a.config.tid+"_"+e)};this.Index=function(b,d,c){a.RD(a.config.indexUrl+(c?c:a.config.indexRouter),{id:b},d,"sindex_"+b)};this.News=function(b,d){a.RD(a.config.newsUrl+(d?d:a.config.newsRouter),{},b,"news_"+(new Date).getTime())};this.Order=function(b,d,c){c=c?c:a.config.orderRouter;b&&0<b.length?a.RD(a.config.orderUrl+c,{mids:b},d,"order_"+(new Date).getTime()):d(null,"mid is null!")};this.Site=function(b,d){a.RD(a.config.siteUrl+(d?d:a.config.siteRouter),{tid:a.config.tid,lid:a.config.lid},b,"site_"+a.config.lid+"_"+a.config.tid)};this.Map=function(b,d,c){b&&(a.config.sid=b);if(!/^\d{1,}$/.test(a.config.sid+""))throw a.errorMsg="Load Map's Data Failed\u00a3\u00acNo SID!",a.errorMsg;a.RD(a.config.mapUrl+(c?c:a.config.mapRouter),{sid:a.config.sid},d,"map_"+a.config.sid)};this.Hot=function(b,d,c){b||(b=a.config.sid);a.RD(a.config.hotUrl+(c?c:a.config.hotRouter),{sid:b},d,"Hot_"+b)};this.List=function(b,d,c,e,f,g){c||(c="");e||(e="");f||(f=a.config.sid);g=g?g:a.config.listRouter;var h=k();a.RD(a.config.listUrl+g,{sid:f,mid:b,pno:c,pco:e},d,"list_"+f+"_"+b+"_"+c+"_"+e+h)};this.Art=function(b,d,c){a.RD(a.config.artUrl+(c?c:a.config.artRouter),{aid:b},d,"art_"+b)};this.Cate=function(b,d,c,e){var f=k();b||(b=a.config.lid);d||(d=a.config.tid);a.RD(a.config.cateUrl+(e?e:a.config.cateRouter),{lid:b,tid:d},c,"cate_"+b+"_"+d+"_"+f)};this.More=function(b,d,c,e,f,g){c||(c="");e||(e="");f||(f=a.config.sid);var h=Math.ceil(10*Math.random())*Math.ceil(10*Math.random())*(new Date).getMilliseconds();a.RD(a.config.moreUrl+(g?g:a.config.moreRouter),{sid:f,cid:b,pno:c,pco:e},d,"more_"+f+"_"+b+"_"+c+"_"+e+"_"+h)};this.SetTimeout=function(b){b&&(b+="",(!1,test(b+""))||(b=parseInt(b),a.ajaxTimeout=b))};this.StopAllRequest=function(){for(var b in this.ajaxTimers)clearTimeout(a.ajaxTimers[b]),a.ajaxTimers[b]=0;a.ajaxTimers=[]}};
YX.Data.Config=function(c){var a=this;this.lid=this.sid=this.sortRouter=this.sortUrl=this.indexRouter=this.indexUrl=this.newsRouter=this.newsUrl=this.orderRouter=this.orderUrl=this.moreRouter=this.moreUrl=this.cateRouter=this.cateUrl=this.artRouter=this.artUrl=this.listRouter=this.listUrl=this.hotRouter=this.hotUrl=this.mapRouter=this.mapUrl=this.siteRouter=this.siteUrl=this.serverPath="";this;tid="";this.HttpPath=function(b){return a.GetDomain()+a.serverPath+b};this.GetDomain=function(){return document.location.href.split(a.serverPath)[0]};this.Init=function(){var b=location.pathname.split("/");a.serverPath=(3>b.length?"":b[b.length-2])+"/";a.siteUrl=0<$("#yx_siteurl").length?$("#yx_siteurl").get(0).href:"";a.siteRouter=0<$("#yx_siteurl").length?$("#yx_siteurl").get(0).getAttribute("router"):"";a.mapUrl=0<$("#yx_mapurl").length?$("#yx_mapurl").get(0).href:"";a.mapRouter=0<$("#yx_mapurl").length?$("#yx_mapurl").get(0).getAttribute("router"):"";a.hotUrl=0<$("#yx_hoturl").length?$("#yx_hoturl").get(0).href:"";a.hotRouter=0<$("#yx_hoturl").length?$("#yx_hoturl").get(0).getAttribute("router"):"";a.listUrl=0<$("#yx_listurl").length?$("#yx_listurl").get(0).href:"";a.listRouter=0<$("#yx_listurl").length?$("#yx_listurl").get(0).getAttribute("router"):"";a.cateUrl=0<$("#yx_cateurl").length?$("#yx_cateurl").get(0).href:"";a.cateRouter=0<$("#yx_cateurl").length?$("#yx_cateurl").get(0).getAttribute("router"):"";a.moreUrl=0<$("#yx_moreurl").length?$("#yx_moreurl").get(0).href:"";a.moreRouter=0<$("#yx_moreurl").length?$("#yx_moreurl").get(0).getAttribute("router"):"";a.artUrl=0<$("#yx_arturl").length?$("#yx_arturl").get(0).href:"";a.artRouter=0<$("#yx_arturl").length?$("#yx_arturl").get(0).getAttribute("router"):"";a.orderUrl=0<$("#yx_suburl").length?$("#yx_suburl").get(0).href:"";a.orderRouter=0<$("#yx_suburl").length?$("#yx_suburl").get(0).getAttribute("router"):"";a.newsUrl=0<$("#yx_newsurl").length?$("#yx_newsurl").get(0).href:"";a.newsRouter=0<$("#yx_newsurl").length?$("#yx_newsurl").get(0).getAttribute("router"):"";a.indexUrl=0<$("#yx_indexurl").length?$("#yx_indexurl").get(0).href:"";a.indexRouter=0<$("#yx_indexurl").length?$("#yx_indexurl").get(0).getAttribute("router"):"";a.sortUrl=0<$("#yx_sorturl").length?$("#yx_sorturl").get(0).href:"";a.sortRouter=0<$("#yx_sorturl").length?$("#yx_sorturl").get(0).getAttribute("router"):"";a.sid=0<$("#yx_sid").length?$("#yx_sid").text():"";a.tid=0<$("#yx_tid").length?$("#yx_tid").text():"";a.lid=0<$("#yx_lid").length?$("#yx_lid").text():""}};
YX.Data.Cache=function(d){var c=this;this.IsCache=!1;this.Clear=function(){c.Memory.Clear();c.Local.Clear()};this.Get=function(a){if(!c.IsCache)return null;var b=c.Local.Get(a);return b?b:c.Memory.Get(a)};this.Set=function(a,b){c.IsCache&&(c.Memory.Set(a,b),c.Local.Set(a,b))};this.Memory={cache:{},Set:function(a,b){this.cache[a]=b},Get:function(a){return this.cache[a]?this.cache[a]:null},Clear:function(){this.cache={}}};this.Local={Get:function(a){if((a=window.localStorage&&window.localStorage.getItem(a)?
window.localStorage.getItem(a):null)&&window.JSON)try{a=JSON.parse(a)}catch(b){}return a},Set:function(a,b){window.JSON&&"object"==typeof b&&(b=JSON.stringify(b));window.localStorage&&window.localStorage.setItem(a,b)},Clear:function(){window.localStorage&&window.localStorage.clear()}}};
YX.Data.Util=function(d){this.DecodeUrl=function(b){return b?unescape(b):""};this.EncodeUrl=function(b){return b?escape(b):""};this.Serialize=function(b){switch(b.constructor){case Object:var a="{",c;for(c in b)a+=c+":"+this.Serialize(b[c])+",";","==a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return a+"}";case Array:a="[";for(c in b)a+=this.Serialize(b[c])+",";","==a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return a+"]";case Boolean:return'"'+b.toString()+'"';case Date:return'"'+b.toString()+
'"';case Number:return'"'+b.toString()+'"';case String:return'"'+b.toString()+'"'}}};